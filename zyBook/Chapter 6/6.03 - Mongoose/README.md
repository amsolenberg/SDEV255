# Mongoose

## Common Mongoose find methods

| Method                                  | Description                                           | Example                                                                                                                                                                                                                                                                                                                |
| --------------------------------------- | ----------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Model.find(conditions, [callback])`    | Finds all documents that match the conditions.        | `// Find all students with gpa >= 3`<br>`Student.find({ gpa: { $gte: 3 }},`<br>`   function(err, students) {`<br>`      console.log(students);`<br>`   }`<br>`)`                                                                                                                                                       |
| `Model.findOne(conditions, [callback])` | Finds the first document that matches the conditions. | `// Find first student with "black" somewhere in the name`<br>`Student.findOne({ name: new RegExp("black", "i") },`<br>`   function(err, stu) {`<br>`      if (stu === null) {`<br>`         console.log("No student found");`<br>`      }`<br>`      else {`<br>`         console.log(stu);`<br>`      }`<br>`   });` |
| `Model.findById(id, [callback])`        | Finds the document that matches the id.               | `// Find the student with this ObjectId`<br>`Student.findById("56e0ad2301c0b1ea806cadcd",`<br>`   function(err, stu) {`<br>`      if (stu === null) {`<br>`         console.log("No student found");`<br>`      }`<br>`      else {`<br>`         console.log(stu);`<br>`      }`<br>`   });`                          |

## Common Mongoose update methods

| Method                                                            | Description                                                      | Example                                                                                                                                                                                                                                                     |
| ----------------------------------------------------------------- | ---------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Model.updateOne(conditions, update, [options], [callback])`      | Updates the first document that matches the conditions.          | `// Change Sue's birthDate to 1995-12-02`<br>`Student.updateOne({ name: "Sue Black" },`<br>`   { birthDate: new Date(1995, 11, 2) },`<br>`   function(err, result) {`<br>`      console.log("Docs updated: " + result.modifiedCount);`<br>`   });`          |
| `Model.updateMany(conditions, update, [options], [callback])`     | Updates all documents that match the conditions.                 | `// Add 0.5 to all GPAs <= 3.5`<br>`Student.updateMany({ gpa: { $lte: 3.5 } },`<br>`   { $inc: { gpa: 0.5 } },`<br>`   function(err, result) {`<br>`      console.log("Docs updated: " + result.modifiedCount);`<br>`   });`                                |
| `Query.updateOne([conditions], [update], [options], [callback])`  | Updates the first document that matches the optional conditions. | `// Change this student's GPA to 3.9`<br>`Student.where({ _id: "56e711a9e1b0f9080f7a5621" })`<br>`   .updateOne({ $set: { gpa: 3.9 } })`<br>`   .exec(function(err, result) {`<br>`      console.log("Docs updated: " + result.modifiedCount);`<br>`   });` |
| `Query.updateMany([conditions], [update], [options], [callback])` | Updates all documents that match the optional conditions.        | `// Set all GPAs <= 3.5 to 2`<br>`Student.where({ gpa: { $lte: 3.5 } })`<br>`   .updateMany({ $set: { gpa: 2 } })`<br>`   .exec(function(err, result) {`<br>`      console.log("Docs updated: " + result.modifiedCount);`<br>`   });`                       |

## Common Mongoose delete methods

| Method                                       | Description                                                      | Example                                                                                                                                                                                                                             |
| -------------------------------------------- | ---------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `Model.deleteOne(conditions, [callback])`    | Deletes the first document that matches the conditions.          | `// Delete student with given id`<br>`Student.deleteOne({ _id: "56e711a9e1b0f9080f7a5621" },`<br>`   function(err, result) {`<br>`      console.log("Deleted " + result.deletedCount);`<br>`   });`                                 |
| `Model.deleteMany(conditions, [callback])`   | Deletes all documents that match the conditions.                 | `// Delete all students with GPA < 3`<br>`Student.deleteMany({ gpa: { $lt: 3 }},`<br>`   function(err, result) {`<br>`      console.log("Deleted " + result.deletedCount);`<br>`   });`                                             |
| `Query.deleteOne([conditions], [callback])`  | Deletes the first document that matches the optional conditions. | `// Delete first student with 2000-10-05 birthdate`<br>`Student.find({ birthDate: "2000-10-05" })`<br>`   .deleteOne()`<br>`   .exec(function(err, result) {`<br>`      console.log("Deleted " + result.deletedCount);`<br>`   });` |
| `Query.deleteMany([conditions], [callback])` | Deletes all documents that match the optional conditions.        | `// Delete all students with GPA < 2`<br>`Student.find({ gpa: { $lt: 2 }})`<br>`   .deleteMany()`<br>`   .exec();`                                                                                                                  |
